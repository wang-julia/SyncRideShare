{"version":3,"sources":["../../../src/subrouteHandlers/index.ts"],"sourcesContent":["import {\n  type AuthenticatedActionKey,\n  FlowgladActionKey,\n  type HybridActionKey,\n} from '@flowglad/shared'\nimport {\n  createActivateSubscriptionCheckoutSession,\n  createAddPaymentMethodCheckoutSession,\n  createCheckoutSession,\n} from './checkoutSessionHandlers'\nimport {\n  findOrCreateCustomer,\n  getCustomerBilling,\n  updateCustomer,\n} from './customerHandlers'\nimport { getPricingModel } from './pricingModelHandlers'\nimport {\n  claimResource,\n  getResources,\n  getResourceUsage,\n  listResourceClaims,\n  releaseResource,\n} from './resourceHandlers'\nimport {\n  adjustSubscription,\n  cancelSubscription,\n  uncancelSubscription,\n} from './subscriptionHandlers'\nimport type { HybridSubRouteHandler, SubRouteHandler } from './types'\nimport { createUsageEvent } from './usageEventHandlers'\nimport { getUsageMeterBalances } from './usageMeterHandlers'\n\nexport const routeToHandlerMap: {\n  [K in AuthenticatedActionKey]: SubRouteHandler<K>\n} = {\n  [FlowgladActionKey.GetCustomerBilling]: getCustomerBilling,\n  [FlowgladActionKey.FindOrCreateCustomer]: findOrCreateCustomer,\n  [FlowgladActionKey.UpdateCustomer]: updateCustomer,\n  [FlowgladActionKey.CreateCheckoutSession]: createCheckoutSession,\n  [FlowgladActionKey.CreateAddPaymentMethodCheckoutSession]:\n    createAddPaymentMethodCheckoutSession,\n  [FlowgladActionKey.CreateActivateSubscriptionCheckoutSession]:\n    createActivateSubscriptionCheckoutSession,\n  [FlowgladActionKey.CancelSubscription]: cancelSubscription,\n  [FlowgladActionKey.UncancelSubscription]: uncancelSubscription,\n  [FlowgladActionKey.AdjustSubscription]: adjustSubscription,\n  [FlowgladActionKey.CreateSubscription]: async () => {\n    return {\n      data: {},\n      status: 501,\n      error: {\n        code: 'Not Implemented',\n        json: {},\n      },\n    }\n  },\n  [FlowgladActionKey.CreateUsageEvent]: createUsageEvent,\n  [FlowgladActionKey.GetResourceUsages]: getResources,\n  [FlowgladActionKey.GetResourceUsage]: getResourceUsage,\n  [FlowgladActionKey.ClaimResource]: claimResource,\n  [FlowgladActionKey.ReleaseResource]: releaseResource,\n  [FlowgladActionKey.ListResourceClaims]: listResourceClaims,\n  [FlowgladActionKey.GetUsageMeterBalances]: getUsageMeterBalances,\n}\n\nexport const hybridRouteToHandlerMap: {\n  [K in HybridActionKey]: HybridSubRouteHandler<K>\n} = {\n  [FlowgladActionKey.GetPricingModel]: getPricingModel,\n}\n\n/**\n * Runtime check for whether an action key is a hybrid route.\n * Used by requestHandler to determine auth behavior.\n */\nexport const isHybridActionKey = (\n  key: FlowgladActionKey\n): key is HybridActionKey => {\n  return key in hybridRouteToHandlerMap\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAIO;AACP,qCAIO;AACP,8BAIO;AACP,kCAAgC;AAChC,8BAMO;AACP,kCAIO;AAEP,gCAAiC;AACjC,gCAAsC;AAE/B,MAAM,oBAET;AAAA,EACF,CAAC,gCAAkB,kBAAkB,GAAG;AAAA,EACxC,CAAC,gCAAkB,oBAAoB,GAAG;AAAA,EAC1C,CAAC,gCAAkB,cAAc,GAAG;AAAA,EACpC,CAAC,gCAAkB,qBAAqB,GAAG;AAAA,EAC3C,CAAC,gCAAkB,qCAAqC,GACtD;AAAA,EACF,CAAC,gCAAkB,yCAAyC,GAC1D;AAAA,EACF,CAAC,gCAAkB,kBAAkB,GAAG;AAAA,EACxC,CAAC,gCAAkB,oBAAoB,GAAG;AAAA,EAC1C,CAAC,gCAAkB,kBAAkB,GAAG;AAAA,EACxC,CAAC,gCAAkB,kBAAkB,GAAG,MAAY;AAClD,WAAO;AAAA,MACL,MAAM,CAAC;AAAA,MACP,QAAQ;AAAA,MACR,OAAO;AAAA,QACL,MAAM;AAAA,QACN,MAAM,CAAC;AAAA,MACT;AAAA,IACF;AAAA,EACF;AAAA,EACA,CAAC,gCAAkB,gBAAgB,GAAG;AAAA,EACtC,CAAC,gCAAkB,iBAAiB,GAAG;AAAA,EACvC,CAAC,gCAAkB,gBAAgB,GAAG;AAAA,EACtC,CAAC,gCAAkB,aAAa,GAAG;AAAA,EACnC,CAAC,gCAAkB,eAAe,GAAG;AAAA,EACrC,CAAC,gCAAkB,kBAAkB,GAAG;AAAA,EACxC,CAAC,gCAAkB,qBAAqB,GAAG;AAC7C;AAEO,MAAM,0BAET;AAAA,EACF,CAAC,gCAAkB,eAAe,GAAG;AACvC;AAMO,MAAM,oBAAoB,CAC/B,QAC2B;AAC3B,SAAO,OAAO;AAChB;","names":[]}