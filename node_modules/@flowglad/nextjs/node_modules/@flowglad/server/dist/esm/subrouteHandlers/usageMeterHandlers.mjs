import {
  __async
} from "../chunk-E3LOUS7X.mjs";
import {
  getUsageMeterBalancesSchema,
  HTTPMethod
} from "@flowglad/shared";
import { parseErrorStringToErrorObject } from "../serverUtils.mjs";
const getUsageMeterBalances = (params, flowgladServer) => __async(null, null, function* () {
  let error;
  let status;
  let data = {};
  if (params.method !== HTTPMethod.POST) {
    error = {
      code: "Method not allowed",
      json: {}
    };
    status = 405;
    return {
      data,
      status,
      error
    };
  }
  try {
    const parsedParams = getUsageMeterBalancesSchema.parse(
      params.data
    );
    const result = yield flowgladServer.getUsageMeterBalances(parsedParams);
    data = result;
    status = 200;
  } catch (e) {
    if (e instanceof Error) {
      error = parseErrorStringToErrorObject(e.message);
    } else {
      error = {
        code: "Unknown error",
        json: {}
      };
    }
    status = 500;
  }
  return {
    data,
    status,
    error
  };
});
export {
  getUsageMeterBalances
};
//# sourceMappingURL=usageMeterHandlers.mjs.map