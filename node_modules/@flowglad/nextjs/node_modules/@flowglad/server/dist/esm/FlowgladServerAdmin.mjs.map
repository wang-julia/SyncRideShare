{"version":3,"sources":["../../src/FlowgladServerAdmin.ts"],"sourcesContent":["import {\n  type ClientOptions,\n  Flowglad as FlowgladNode,\n} from '@flowglad/node'\nimport {\n  type BulkCreateUsageEventsParams,\n  bulkCreateUsageEventsSchema,\n} from '@flowglad/shared'\n\nexport class FlowgladServerAdmin {\n  private flowgladNode: FlowgladNode\n\n  constructor(options: ClientOptions) {\n    this.flowgladNode = new FlowgladNode(options)\n  }\n\n  public async createCustomer(\n    input: FlowgladNode.Customers.CustomerCreateParams\n  ) {\n    return this.flowgladNode.customers.create(input)\n  }\n\n  public async getCustomer(externalId: string) {\n    return this.flowgladNode.customers.retrieve(externalId)\n  }\n\n  public async getCustomerBilling(externalId: string) {\n    return this.flowgladNode.customers.retrieveBilling(externalId)\n  }\n\n  public async updateCustomer(\n    id: string,\n    input: FlowgladNode.Customers.CustomerUpdateParams\n  ) {\n    return this.flowgladNode.customers.update(id, input)\n  }\n\n  public async getPricingModel(id: string) {\n    return this.flowgladNode.pricingModels.retrieve(id)\n  }\n\n  public async getDefaultPricingModel() {\n    return this.flowgladNode.pricingModels.retrieveDefault()\n  }\n\n  public async createProduct(\n    input: FlowgladNode.Products.ProductCreateParams\n  ) {\n    return this.flowgladNode.products.create(input)\n  }\n\n  public async updateProduct(\n    id: string,\n    input: FlowgladNode.Products.ProductUpdateParams\n  ) {\n    return this.flowgladNode.products.update(id, input)\n  }\n\n  public async clonePricingModel(\n    id: string,\n    params: FlowgladNode.PricingModels.PricingModelCloneParams\n  ) {\n    return this.flowgladNode.pricingModels.clone(id, params)\n  }\n\n  public async getUsageMeter(id: string) {\n    return this.flowgladNode.usageMeters.retrieve(id)\n  }\n  public async updateUsageMeter(\n    id: string,\n    params: FlowgladNode.UsageMeters.UsageMeterUpdateParams\n  ) {\n    return this.flowgladNode.usageMeters.update(id, params)\n  }\n\n  public async createUsageMeter(\n    params: FlowgladNode.UsageMeters.UsageMeterCreateParams\n  ) {\n    return this.flowgladNode.usageMeters.create(params)\n  }\n\n  public async createUsageEvent(\n    params: FlowgladNode.UsageEvents.UsageEventCreateParams\n  ) {\n    return this.flowgladNode.usageEvents.create(params)\n  }\n\n  /**\n   * Create multiple usage events in a single request.\n   * NOTE: this method is more efficient than calling `createUsageEvent` multiple times.\n   * @param params - The parameters containing an array of usage events.\n   * @returns The created usage events.\n   */\n  public async bulkCreateUsageEvents(\n    params: BulkCreateUsageEventsParams\n  ): Promise<{\n    usageEvents: FlowgladNode.UsageEvents.UsageEventCreateResponse['usageEvent'][]\n  }> {\n    const parsedParams = bulkCreateUsageEventsSchema.parse(params)\n    const usageEvents = parsedParams.usageEvents.map(\n      (usageEvent) => ({\n        ...usageEvent,\n        properties: usageEvent.properties ?? undefined,\n        usageDate: usageEvent.usageDate ?? undefined,\n      })\n    )\n    return this.flowgladNode.post('/api/v1/usage-events/bulk', {\n      body: { usageEvents },\n    })\n  }\n\n  public async getUsageEvent(id: string) {\n    return this.flowgladNode.usageEvents.retrieve(id)\n  }\n}\n"],"mappings":";;;;;AAAA;AAAA,EAEE,YAAY;AAAA,OACP;AACP;AAAA,EAEE;AAAA,OACK;AAEA,MAAM,oBAAoB;AAAA,EAG/B,YAAY,SAAwB;AAClC,SAAK,eAAe,IAAI,aAAa,OAAO;AAAA,EAC9C;AAAA,EAEa,eACX,OACA;AAAA;AACA,aAAO,KAAK,aAAa,UAAU,OAAO,KAAK;AAAA,IACjD;AAAA;AAAA,EAEa,YAAY,YAAoB;AAAA;AAC3C,aAAO,KAAK,aAAa,UAAU,SAAS,UAAU;AAAA,IACxD;AAAA;AAAA,EAEa,mBAAmB,YAAoB;AAAA;AAClD,aAAO,KAAK,aAAa,UAAU,gBAAgB,UAAU;AAAA,IAC/D;AAAA;AAAA,EAEa,eACX,IACA,OACA;AAAA;AACA,aAAO,KAAK,aAAa,UAAU,OAAO,IAAI,KAAK;AAAA,IACrD;AAAA;AAAA,EAEa,gBAAgB,IAAY;AAAA;AACvC,aAAO,KAAK,aAAa,cAAc,SAAS,EAAE;AAAA,IACpD;AAAA;AAAA,EAEa,yBAAyB;AAAA;AACpC,aAAO,KAAK,aAAa,cAAc,gBAAgB;AAAA,IACzD;AAAA;AAAA,EAEa,cACX,OACA;AAAA;AACA,aAAO,KAAK,aAAa,SAAS,OAAO,KAAK;AAAA,IAChD;AAAA;AAAA,EAEa,cACX,IACA,OACA;AAAA;AACA,aAAO,KAAK,aAAa,SAAS,OAAO,IAAI,KAAK;AAAA,IACpD;AAAA;AAAA,EAEa,kBACX,IACA,QACA;AAAA;AACA,aAAO,KAAK,aAAa,cAAc,MAAM,IAAI,MAAM;AAAA,IACzD;AAAA;AAAA,EAEa,cAAc,IAAY;AAAA;AACrC,aAAO,KAAK,aAAa,YAAY,SAAS,EAAE;AAAA,IAClD;AAAA;AAAA,EACa,iBACX,IACA,QACA;AAAA;AACA,aAAO,KAAK,aAAa,YAAY,OAAO,IAAI,MAAM;AAAA,IACxD;AAAA;AAAA,EAEa,iBACX,QACA;AAAA;AACA,aAAO,KAAK,aAAa,YAAY,OAAO,MAAM;AAAA,IACpD;AAAA;AAAA,EAEa,iBACX,QACA;AAAA;AACA,aAAO,KAAK,aAAa,YAAY,OAAO,MAAM;AAAA,IACpD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQa,sBACX,QAGC;AAAA;AACD,YAAM,eAAe,4BAA4B,MAAM,MAAM;AAC7D,YAAM,cAAc,aAAa,YAAY;AAAA,QAC3C,CAAC,eAAY;AApGnB;AAoGuB,kDACZ,aADY;AAAA,YAEf,aAAY,gBAAW,eAAX,YAAyB;AAAA,YACrC,YAAW,gBAAW,cAAX,YAAwB;AAAA,UACrC;AAAA;AAAA,MACF;AACA,aAAO,KAAK,aAAa,KAAK,6BAA6B;AAAA,QACzD,MAAM,EAAE,YAAY;AAAA,MACtB,CAAC;AAAA,IACH;AAAA;AAAA,EAEa,cAAc,IAAY;AAAA;AACrC,aAAO,KAAK,aAAa,YAAY,SAAS,EAAE;AAAA,IAClD;AAAA;AACF;","names":[]}