import {
  __async
} from "../chunk-E3LOUS7X.mjs";
import { HTTPMethod } from "@flowglad/shared";
import { parseErrorStringToErrorObject } from "../serverUtils.mjs";
const createCheckoutSession = (params, flowgladServer) => __async(null, null, function* () {
  let error;
  let status;
  let data = {};
  if (params.method !== HTTPMethod.POST) {
    error = {
      code: "Method not allowed",
      json: {}
    };
    status = 405;
    return {
      data,
      status,
      error
    };
  }
  try {
    const checkoutSession = yield flowgladServer.createCheckoutSession(params.data);
    data = checkoutSession;
    status = 200;
  } catch (e) {
    if (e instanceof Error) {
      error = parseErrorStringToErrorObject(e.message);
    } else {
      error = {
        code: "Unknown error",
        json: {}
      };
    }
    status = 500;
  }
  return {
    data,
    status,
    error
  };
});
const createAddPaymentMethodCheckoutSession = (params, flowgladServer) => __async(null, null, function* () {
  let error;
  let status;
  let data = {};
  if (params.method !== HTTPMethod.POST) {
    error = {
      code: "Method not allowed",
      json: {}
    };
    status = 405;
    return {
      data,
      status,
      error
    };
  }
  try {
    const checkoutSession = yield flowgladServer.createAddPaymentMethodCheckoutSession(
      params.data
    );
    data = checkoutSession;
    status = 200;
  } catch (e) {
    if (e instanceof Error) {
      error = parseErrorStringToErrorObject(e.message);
    } else {
      error = {
        code: "Unknown error",
        json: {}
      };
    }
    status = 500;
  }
  return {
    data,
    status,
    error
  };
});
const createActivateSubscriptionCheckoutSession = (params, flowgladServer) => __async(null, null, function* () {
  let error;
  let status;
  let data = {};
  if (params.method !== HTTPMethod.POST) {
    error = {
      code: "Method not allowed",
      json: {}
    };
    status = 405;
    return {
      data,
      status,
      error
    };
  }
  try {
    const checkoutSession = yield flowgladServer.createActivateSubscriptionCheckoutSession(
      params.data
    );
    data = checkoutSession;
    status = 200;
  } catch (e) {
    if (e instanceof Error) {
      error = parseErrorStringToErrorObject(e.message);
    } else {
      error = {
        code: "Unknown error",
        json: {}
      };
    }
    status = 500;
  }
  return {
    data,
    status,
    error
  };
});
export {
  createActivateSubscriptionCheckoutSession,
  createAddPaymentMethodCheckoutSession,
  createCheckoutSession
};
//# sourceMappingURL=checkoutSessionHandlers.mjs.map