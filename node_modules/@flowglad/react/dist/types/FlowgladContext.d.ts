import type { Flowglad } from '@flowglad/node';
import { type AdjustSubscriptionParams, type BillingWithChecks, type CancelSubscriptionParams, type ClientCreateUsageEventParams, type CreateActivateSubscriptionCheckoutSessionParams, type CreateAddPaymentMethodCheckoutSessionParams, type CreateProductCheckoutSessionParams, type CustomerBillingDetails, type GetPricingModelResponse, type PricingModel, type UncancelSubscriptionParams } from '@flowglad/shared';
/**
 * Constructs the base route for Flowglad API calls.
 *
 * @param baseURL - Optional base URL for the Flowglad API route handler
 * @param betterAuthBasePath - Optional Better Auth base path for routing through Better Auth endpoints
 * @returns The base route for Flowglad API calls
 *
 * When `betterAuthBasePath` is provided, routes are directed to Better Auth endpoints:
 * - e.g., `/api/auth/flowglad/customers/billing`
 *
 * When only `baseURL` is provided (or neither), routes use the standalone handler:
 * - e.g., `/api/flowglad/customers/billing`
 */
export declare const getFlowgladRoute: (baseURL?: string, betterAuthBasePath?: string) => string;
export type FrontendProductCreateCheckoutSessionParams = CreateProductCheckoutSessionParams & {
    autoRedirect?: boolean;
};
export type FrontendCreateAddPaymentMethodCheckoutSessionParams = Omit<CreateAddPaymentMethodCheckoutSessionParams, 'type'> & {
    autoRedirect?: boolean;
};
export type FrontendCreateActivateSubscriptionCheckoutSessionParams = Omit<CreateActivateSubscriptionCheckoutSessionParams, 'type'> & {
    autoRedirect?: boolean;
};
type CreateCheckoutSessionResponse = {
    id: string;
    url: string;
} | {
    error: {
        code: string;
        json: Record<string, unknown>;
    };
};
export type LoadedFlowgladContextValues = BillingWithChecks & {
    loaded: true;
    reload: () => Promise<void>;
    cancelSubscription: (params: CancelSubscriptionParams) => Promise<{
        subscription: Flowglad.Subscriptions.SubscriptionCancelResponse;
    }>;
    uncancelSubscription: (params: UncancelSubscriptionParams) => Promise<{
        subscription: Flowglad.Subscriptions.SubscriptionUncancelResponse;
    }>;
    /**
     * Adjust a subscription to a different price.
     *
     * @example
     * // Simplest: adjust by price slug (quantity defaults to 1)
     * await adjustSubscription({ priceSlug: 'pro-monthly' })
     *
     * // With quantity
     * await adjustSubscription({ priceSlug: 'pro-monthly', quantity: 5 })
     *
     * // Using price ID
     * await adjustSubscription({ priceId: 'price_abc123', quantity: 3 })
     *
     * // With timing override
     * await adjustSubscription({
     *   priceSlug: 'pro-monthly',
     *   timing: 'at_end_of_current_billing_period'
     * })
     *
     * // Explicit subscription ID (for multi-subscription customers)
     * await adjustSubscription({
     *   priceSlug: 'pro-monthly',
     *   subscriptionId: 'sub_123'
     * })
     *
     * // Complex adjustment with multiple items
     * await adjustSubscription({
     *   subscriptionItems: [
     *     { priceSlug: 'base-plan', quantity: 1 },
     *     { priceSlug: 'addon-storage', quantity: 3 },
     *   ],
     *   timing: 'immediately',
     *   prorate: true,
     * })
     *
     * @param params - Adjustment parameters (one of three forms)
     * @param params.priceSlug - Adjust to a price by slug
     * @param params.priceId - Adjust to a price by ID
     * @param params.subscriptionItems - Array of items for multi-item adjustments
     * @param params.quantity - Number of units (default: 1)
     * @param params.subscriptionId - Subscription ID (auto-resolves if customer has exactly 1 subscription)
     * @param params.timing - 'immediately' | 'at_end_of_current_billing_period' | 'auto' (default: 'auto')
     * @param params.prorate - Whether to prorate (default: true for immediate, false for end-of-period)
     */
    adjustSubscription: (params: AdjustSubscriptionParams) => Promise<{
        subscription: Flowglad.Subscriptions.SubscriptionAdjustResponse;
    }>;
    createCheckoutSession: (params: FrontendProductCreateCheckoutSessionParams) => Promise<CreateCheckoutSessionResponse>;
    createAddPaymentMethodCheckoutSession: (params: FrontendCreateAddPaymentMethodCheckoutSessionParams) => Promise<CreateCheckoutSessionResponse>;
    createActivateSubscriptionCheckoutSession: (params: FrontendCreateActivateSubscriptionCheckoutSessionParams) => Promise<CreateCheckoutSessionResponse>;
    createUsageEvent: (params: ClientCreateUsageEventParams) => Promise<{
        usageEvent: {
            id: string;
        };
    } | {
        error: {
            code: string;
            json: Record<string, unknown>;
        };
    }>;
    errors: null;
};
export interface NonPresentContextValues {
    customer: null;
    subscriptions: null;
    createCheckoutSession: null;
    createAddPaymentMethodCheckoutSession: null;
    createActivateSubscriptionCheckoutSession: null;
    createUsageEvent: null;
    checkFeatureAccess: null;
    checkUsageBalance: null;
    hasPurchased: null;
    pricingModel: null;
    billingPortalUrl: null;
    reload: null;
    /**
     * @deprecated Use `pricingModel` instead. This property is kept for backward compatibility.
     */
    catalog: null;
    invoices: [];
    paymentMethods: [];
    purchases: [];
    cancelSubscription: null;
    uncancelSubscription: null;
    adjustSubscription: null;
    currentSubscriptions: [];
    currentSubscription: null;
}
export interface NotLoadedFlowgladContextValues extends NonPresentContextValues {
    loaded: false;
    errors: null;
}
export interface NotAuthenticatedFlowgladContextValues extends NonPresentContextValues {
    loaded: true;
    errors: null;
}
export interface ErrorFlowgladContextValues extends NonPresentContextValues {
    loaded: true;
    errors: Error[];
}
export type FlowgladContextValues = LoadedFlowgladContextValues | NotLoadedFlowgladContextValues | NotAuthenticatedFlowgladContextValues | ErrorFlowgladContextValues;
/**
 * Configuration for all requests made to the Flowglad API
 * route.
 */
export interface RequestConfig {
    baseURL?: string;
    headers?: Record<string, string>;
    /**
     * Custom fetch implementation for React Native compatibility.
     * If not provided, falls back to global fetch.
     * Required in React Native environments where global fetch may not be available.
     */
    fetch?: typeof fetch;
}
type CustomerBillingRouteResponse = {
    data?: CustomerBillingDetails | null;
    error?: {
        message: string;
    } | null;
};
type PricingModelRouteResponse = {
    data?: GetPricingModelResponse | null;
    error?: {
        code: string;
        json: Record<string, unknown>;
    } | null;
};
interface FetchFlowgladParams {
    baseURL?: string;
    betterAuthBasePath?: string;
    requestConfig?: RequestConfig;
}
export declare const fetchCustomerBilling: ({ baseURL, betterAuthBasePath, requestConfig, }: FetchFlowgladParams) => Promise<CustomerBillingRouteResponse>;
export declare const fetchPricingModel: ({ baseURL, betterAuthBasePath, requestConfig, }: FetchFlowgladParams) => Promise<PricingModelRouteResponse>;
/**
 * Hook to access billing data and actions for the current authenticated customer.
 *
 * Automatically fetches billing data when mounted. The hook returns loading state,
 * customer information, subscriptions, and action functions for managing billing.
 *
 * @returns {FlowgladContextValues} The billing context including:
 *   - `loaded`: Whether billing data has been fetched
 *   - `errors`: Any errors that occurred during fetch
 *   - `customer`: The customer object (null if not authenticated)
 *   - `subscriptions`: Array of customer subscriptions
 *   - `currentSubscription`: The primary active subscription
 *   - `pricingModel`: The pricing model with products and prices
 *   - Action functions: `createCheckoutSession`, `cancelSubscription`, `adjustSubscription`, etc.
 *
 * @example
 * ```tsx
 * function BillingPage() {
 *   const billing = useBilling()
 *
 *   if (!billing.loaded) return <Loading />
 *   if (billing.errors) return <Error errors={billing.errors} />
 *   if (!billing.customer) return <SignInPrompt />
 *
 *   return <SubscriptionDetails subscription={billing.currentSubscription} />
 * }
 * ```
 */
export declare const useBilling: () => FlowgladContextValues;
/**
 * Hook to fetch public pricing data without requiring authentication.
 *
 * Unlike `useBilling`, this hook fetches only the pricing model (products and prices)
 * from a public endpoint. Use this for pricing pages that should be visible to
 * unauthenticated users.
 *
 * @returns {PricingModel | null} The pricing model containing products, prices, and
 *   usage meters, or null while loading or if unavailable.
 *
 * @example
 * ```tsx
 * function PricingPage() {
 *   const pricingModel = usePricingModel()
 *
 *   if (!pricingModel) return <Loading />
 *
 *   return (
 *     <div>
 *       {pricingModel.products.map(product => (
 *         <PricingCard key={product.id} product={product} />
 *       ))}
 *     </div>
 *   )
 * }
 * ```
 */
export declare const usePricingModel: () => PricingModel | null;
/**
 * Alias for `usePricingModel`.
 *
 * This is a convenience alias for developers who prefer a shorter hook name.
 * Functionally identical to `usePricingModel`.
 *
 * @returns {PricingModel | null} The pricing model, or null while loading or if unavailable.
 * @see usePricingModel
 */
export declare const usePricing: () => import("@flowglad/node/resources/shared.js").PricingModelDetailsRecord | null;
export {};
