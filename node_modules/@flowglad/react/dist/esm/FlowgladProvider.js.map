{"version":3,"sources":["../../src/FlowgladProvider.tsx"],"sourcesContent":["'use client'\nimport type { CustomerBillingDetails } from '@flowglad/shared'\nimport {\n  QueryClient,\n  QueryClientProvider,\n} from '@tanstack/react-query'\nimport type React from 'react'\nimport { FlowgladConfigProvider } from './FlowgladConfigContext'\nimport { type RequestConfig } from './FlowgladContext'\nimport { validateUrl } from './utils'\n\nlet clientQueryClientSingleton: QueryClient | undefined = undefined\n\nconst getQueryClient = () => {\n  if (typeof window === 'undefined') {\n    return new QueryClient()\n  }\n  if (!clientQueryClientSingleton) {\n    clientQueryClientSingleton = new QueryClient()\n  }\n  return clientQueryClientSingleton\n}\n\nexport interface LoadedFlowgladProviderProps {\n  children: React.ReactNode\n  requestConfig?: RequestConfig\n  baseURL?: string\n  /**\n   * When using Better Auth integration, set this to your Better Auth API base path\n   * (e.g., '/api/auth'). This routes all Flowglad API calls through Better Auth\n   * endpoints instead of the standalone /api/flowglad route.\n   *\n   */\n  betterAuthBasePath?: string\n}\n\ninterface DevModeFlowgladProviderProps {\n  __devMode: true\n  billingMocks: CustomerBillingDetails\n  children: React.ReactNode\n}\n\nexport type FlowgladProviderProps =\n  | LoadedFlowgladProviderProps\n  | DevModeFlowgladProviderProps\n\nexport const FlowgladProvider = (props: FlowgladProviderProps) => {\n  const queryClient = getQueryClient()\n  if ('__devMode' in props) {\n    return (\n      <QueryClientProvider client={queryClient}>\n        <FlowgladConfigProvider\n          __devMode\n          billingMocks={props.billingMocks}\n        >\n          {props.children}\n        </FlowgladConfigProvider>\n      </QueryClientProvider>\n    )\n  }\n\n  const { baseURL, betterAuthBasePath, requestConfig, children } =\n    props\n  if (baseURL) {\n    validateUrl(baseURL, 'baseURL', true)\n  }\n  if (betterAuthBasePath) {\n    validateUrl(betterAuthBasePath, 'betterAuthBasePath', true)\n  }\n  return (\n    <QueryClientProvider client={queryClient}>\n      <FlowgladConfigProvider\n        baseURL={baseURL}\n        betterAuthBasePath={betterAuthBasePath}\n        requestConfig={requestConfig}\n      >\n        {children}\n      </FlowgladConfigProvider>\n    </QueryClientProvider>\n  )\n}\n\nexport default FlowgladProvider\n"],"mappings":";;AAmDQ;AAjDR;AAAA,EACE;AAAA,EACA;AAAA,OACK;AAEP,SAAS,8BAA8B;AAEvC,SAAS,mBAAmB;AAE5B,IAAI,6BAAsD;AAE1D,MAAM,iBAAiB,MAAM;AAC3B,MAAI,OAAO,WAAW,aAAa;AACjC,WAAO,IAAI,YAAY;AAAA,EACzB;AACA,MAAI,CAAC,4BAA4B;AAC/B,iCAA6B,IAAI,YAAY;AAAA,EAC/C;AACA,SAAO;AACT;AAyBO,MAAM,mBAAmB,CAAC,UAAiC;AAChE,QAAM,cAAc,eAAe;AACnC,MAAI,eAAe,OAAO;AACxB,WACE,oBAAC,uBAAoB,QAAQ,aAC3B;AAAA,MAAC;AAAA;AAAA,QACC,WAAS;AAAA,QACT,cAAc,MAAM;AAAA,QAEnB,gBAAM;AAAA;AAAA,IACT,GACF;AAAA,EAEJ;AAEA,QAAM,EAAE,SAAS,oBAAoB,eAAe,SAAS,IAC3D;AACF,MAAI,SAAS;AACX,gBAAY,SAAS,WAAW,IAAI;AAAA,EACtC;AACA,MAAI,oBAAoB;AACtB,gBAAY,oBAAoB,sBAAsB,IAAI;AAAA,EAC5D;AACA,SACE,oBAAC,uBAAoB,QAAQ,aAC3B;AAAA,IAAC;AAAA;AAAA,MACC;AAAA,MACA;AAAA,MACA;AAAA,MAEC;AAAA;AAAA,EACH,GACF;AAEJ;AAEA,IAAO,2BAAQ;","names":[]}